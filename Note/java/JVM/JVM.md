## 什么是JVM
- Java Virtual Machine。运行Java二进制字节码
- 优点：
    - 一次编写，到处运行。屏蔽了字节码和底层操作系统的差异，对外提供了一致的运行环境，达到平台无关性
    - 自动内存管理，垃圾回收功能。
    - 数组下标越界检查。万一覆盖了其他的内存空间的代码呢
    - 多态。
## JVM内存结构
- Method Area.方法区
- Heap.堆
- JVM Stack.虚拟机栈
- PC Register.程序计数器
- Native Method Stack.本地方法栈
## JVM指令
- 字节码(一些JVM指令的集合)->经过解释器->机器码(CPU执行)
## 程序计数器
- 是一个寄存器，速度快
- 作用：存储下一条指令的地址
- 特点
  - 是线程私有的。可用来线程切换时保存进度
  -  唯一没有内存溢出的区
## 虚拟机栈
- Stack:弹夹压入子弹
-  线程运行时需要的内存空间
- 组成:栈帧（每个方法运行时需要的内存）。
- 每个线程只能有一个活动栈帧（正在执行的方法）。多个栈帧存在，则递归执行
- 栈的演示:idea中Debug模式下的Frames显示的是当前栈帧

## 垃圾回收是否涉及栈内存？

- 不会。栈帧内存在每次调用结束后会被弹出栈，也就是会被自动回收，不需要GC来管理。GC要回收的是Heap堆中的无用对象

## 方法内的声明局部变量是否线程安全？

- 是的。每个线程栈帧的局部变量是独立的
- 但是若是返回了局部对象的引用，还是可能导致被其他线程修改

## 栈内存溢出

- 可以手动设置栈大小112

- java.lang.StackOverflowError
- 栈帧过多（如一直递归），栈帧过大





@
